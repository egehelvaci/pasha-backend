// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider      = "prisma-client-js"
  output        = "../generated/prisma"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:JQFOWXIpEnSvchuIMXpPpGHvCYVOSUdx@yamabiko.proxy.rlwy.net:17072/railway"
}

enum Currency {
  TRY
  USD
  EUR
}

model UserType {
  id    Int    @id @default(autoincrement())
  name  String @unique
  users User[]
}

model User {
  userId      String   @id @default(uuid()) @map("user_id")
  userTypeId  Int      @map("user_type_id")
  userType    UserType @relation(fields: [userTypeId], references: [id])
  username    String   @unique
  name        String
  surname     String
  email       String   @unique
  phoneNumber String?  @map("phone_number")
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  password    String
  avatar      String?
  credit      Decimal  @default(0) @db.Decimal(10, 2)
  debit       Decimal  @default(0) @db.Decimal(10, 2)
}

model Collection {
  collectionId  String    @id @default(uuid()) @map("collection_id")
  name          String
  description   String?
  code          String    @unique
  coverImageUrl String?   @map("cover_image_url")
  catalogOrder  Int       @map("catalog_order")
  price         Decimal   @default(0) @db.Decimal(10, 2)
  currency      Currency  @default(TRY)
  isActive      Boolean   @default(true) @map("is_active")
  createdAt     DateTime  @default(now()) @map("created_at")
  updatedAt     DateTime  @updatedAt @map("updated_at")
  products      Product[] // Koleksiyona ait ürünler
}

model Product {
  productId    String     @id @default(uuid()) @map("product_id")
  name         String
  description  String
  price        Decimal    @db.Decimal(10, 2)
  stock        Int
  barcode      String
  quality      String
  width        Float
  height       Float
  cut          Boolean
  customWeight Float?     @map("custom_weight")
  customHeight Float?     @map("custom_height")
  collectionId String     @map("collection_id")
  collection   Collection @relation(fields: [collectionId], references: [collectionId])
  createdAt    DateTime   @default(now()) @map("created_at")
  updatedAt    DateTime   @updatedAt @map("updated_at")
}
